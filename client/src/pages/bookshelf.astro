---
import { getReadBooks } from "../lib/hardcover";
import Page from "../layouts/Page.astro";
import { Image } from "astro:assets";

const books = await getReadBooks();
---

<Page title="bookshelf" description="Books I've read">
  <div
    class="w-full prose prose-slate prose-invert prose-lg prose-a:no-underline prose-a:font-normal prose-a:bg-gray-700 prose-a:rounded prose-a:px-1 prose-a:py-0.5 prose-a:text-white hover:prose-a:bg-gray-500 active:prose-a:bg-gray-700 before:prose-code:content-none after:prose-code:content-none before:prose-p:content-none after:prose-p:content-none"
  >
    <p class="">
      See my full reading list on <a href="https://hardcover.app/@RomanHauksson"
        >Hardcover</a
      >.
    </p>
    <ul class="space-y-4 not-prose">
      {
        books.map((userBook) => (
          <a
            href={`https://hardcover.app/books/${userBook.book.slug}`}
            class="flex flex-row flex-wrap gap-4 hover:bg-slate-800 rounded-lg p-4 transition-all duration-100 border border-slate-700 block"
          >
            {userBook.book.default_cover_edition?.image?.url && (
              <Image
                src={userBook.book.default_cover_edition?.image?.url}
                alt={`Book cover for ${userBook.book.title}`}
                width={100}
                height={150}
                class="rounded-lg w-full h-auto max-w-[5rem] aspect-[2/3] object-cover"
                loading="lazy"
              />
            )}
            <div class="flex flex-col shrink grow basis-[15rem]">
              <h3 class="text-3xl font-bold">{userBook.book.title}</h3>
              {userBook.book.subtitle && (
                <p class="text-lg text-gray-400">{userBook.book.subtitle}</p>
              )}
            </div>
          </a>
        ))
      }
    </ul>
  </div>
</Page>
