---
import { getCollection } from "astro:content";

const posts = await getCollection("posts");
const projects = await getCollection("projects");

const json = JSON.stringify({
  posts: posts.map((post) => {
    return {
      title: post.data.title,
      publishDate: post.data.publishDate,
      lastUpdateDate: post.data.lastUpdateDate,
      description: post.data.description,
      heroImagePath: post.data.heroImagePath,
      draft: post.data.draft,
      slug: post.slug,
    };
  }),
  projects: projects.map((project) => {
    return {
      title: project.data.title,
      description: project.data.description,
      heroImagePath: project.data.heroImagePath,
      projectDate: project.data.projectDate,
      publishDate: project.data.publishDate,
      lastUpdateDate: project.data.lastUpdateDate,
      draft: project.data.draft,
      technologies: project.data.technologies,
      hoursWorked: project.data.hoursWorked,
      slug: project.slug,
    };
  }),
});
---

{json}
